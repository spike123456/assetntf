var host="https://netifan.net/",filesToCache=[host,"https://asset.netifan.net/vendors.521327470ceb374f976f.css","https://asset.netifan.net/runtime.abe5e533af2ba8616a39.js","https://asset.netifan.net/vendors.c097b65410026e518954.js","https://asset.netifan.net/main.b052c5474e977024f79b.js","https://asset.netifan.net/reactPlayerYouTube.1.js","https://asset.netifan.net/reactPlayerFilePlayer.1.js"];function parseName(e){const t=e.split("/");if(t.length>0){const e=t[t.length-1];if(/(vendors|main|runtime)\.[A-Fa-f0-9]{20}\.(js|css)/g.test(e))return e.split(".")}}function find(e,t,n){for(const s of n){const n=parseName(s);if(n){const[a,,r]=n;if(e===a&&t===r)return s}}}self.addEventListener("install",(function(e){console.log("[ServiceWorker] Install"),e.waitUntil(caches.open("app").then((async function(e){let t=[];const n=(await e.keys()).map((e=>e.url));for(const e of filesToCache)n.includes(e)||t.push(e);return e.addAll(t)})))})),self.addEventListener("fetch",(async function(e){if(e.request.url.startsWith(host))e.respondWith(caches.match("/").then((function(e){return e||caches.open("app").then((function(e){return fetch(host).then((function(t){return e.put("/",t.clone()),t}))}))})));else if(["https://asset.netifan.net/reactPlayerYouTube.1.js","https://asset.netifan.net/reactPlayerFilePlayer.1.js"].includes(e.request.url))e.respondWith(caches.match(e.request.url).then((function(e){return e})));else{const t=parseName(e.request.url);if(t){const[n,,s]=t;e.respondWith(caches.open("app").then((function(t){return t.match(e.request.url).then((function(a){return a||fetch(e.request).then((async function(a){const r=find(n,s,(await t.keys()).map((e=>e.url)));return r&&await t.delete(r),await t.put(e.request.url,a.clone()),a}))}))})))}}})),self.addEventListener("message",(function(e){"reset"===e.data.type&&caches.open("app").then((async function(t){await t.delete(host),e.ports[0].postMessage({type:"refresh"})}))}));